# SearchEngine. Поисковый движок

Приложение может выполнять несколько задач:
 * Проводить индексацию по сайтам
 * Проводить переиндексацию для страницы
 * Осуществлять поиск слова или фразы на проиндексированных страницах

Допустимые ручки для работы с приложением описаны в  [ApiController.java](src/main/java/searchengine/controllers/ApiController.java)
* GET api/statistics - возвращает статистику и другую служебную информацию о
состоянии поисковых индексов 
* GET /api/startIndexing - запускает полную переиндексацию по всем сайтам, указанным в [application.yaml](src/main/resources/application.yaml)
* GET /api/stopIndexing - останавливает индексацию. Если индексация не происходит в настоящий момент, то возвращает ошибку.
* POST /api/indexPage - запускает переиндексацию по указанной странице
* GET /api/search - осуществляет поиск по переданному поисковому запросу

## Индексация
### Запуск индексации
Осуществляется методом GET /api/startIndexing. 
Список сайтов для индексации настраивается в [application.yaml](src/main/resources/application.yaml)
В результате индексации заполняются таблицы в БД
* site — информация о сайтах и статусах их индексации [Site.java](src/main/java/searchengine/model/Site.java)
* page — проиндексированные страницы сайта [Page.java](src/main/java/searchengine/model/Page.java)
* lemma — леммы, встречающиеся в текстах [Lemma.java](src/main/java/searchengine/model/Lemma.java)
* index — поисковый индекс [IndexPages.java](src/main/java/searchengine/model/IndexPages.java)

Если индексация уже запущена, повторный запуск не возможен. Надо сначала остановить индексацию, потом запустить заново.

### Остановка индексации
Остановка осуществляется методом GET /api/stopIndexing.
Если в настоящий момент индексация не проходит, будет выведена ошибка.

## Переиндексация страницы
Запуск переиндексации осуществляется методом POST /api/indexPage.
Во входящих параметрах передается url — адрес страницы, которую нужно переиндексировать.
Сервис переиндексации проверит, что данная страница принадлежит сайту из списка в [application.yaml](src/main/resources/application.yaml)

## Поисковый запрос
Поисковый запрос передается при помощи GET /api/search.
Параметры:
* query — поисковый запрос. Поддерживается только кириллица.
* site — сайт, по которому осуществлять поиск (если не задан, поиск происходит по всем проиндексированным сайтам); задаётся в
формате адреса, например: http://www.site.com (без слэша в конце).
* offset — сдвиг от 0 для постраничного вывода (параметр
необязательный; если не установлен, то значение по умолчанию равно
нулю);
* limit — количество результатов, которое необходимо вывести (параметр
необязательный; если не установлен, то значение по умолчанию равно
20).

